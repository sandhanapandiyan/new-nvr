; LightNVR Configuration File (INI format)

[general]
pid_file = /var/run/lightnvr.pid
log_file = /var/log/lightnvr.log
log_level = 2  ; 0=ERROR, 1=WARN, 2=INFO, 3=DEBUG
syslog_enabled = false  ; Enable logging to syslog for easier system integration
syslog_ident = lightnvr  ; Syslog identifier (application name)
syslog_facility = LOG_USER  ; Syslog facility (LOG_USER, LOG_DAEMON, LOG_LOCAL0-7)

[storage]
path = /var/lib/lightnvr/data/recordings
max_size = 0  ; 0 means unlimited, otherwise bytes
retention_days = 30
auto_delete_oldest = true

; New recording format options
record_mp4_directly = false
mp4_path = /var/lib/lightnvr/data/recordings/mp4
mp4_segment_duration = 900
mp4_retention_days = 30

[database]
path = /var/lib/lightnvr/data/database/lightnvr.db

[web]
port = 8080
root = /var/lib/lightnvr/www
auth_enabled = false
username = admin
password = admin
auth_timeout_hours = 24  ; Session timeout in hours (default: 24)
web_thread_pool_size = 8

[streams]
max_streams = 16

[models]
path = /var/lib/lightnvr/data/models

[api_detection]
url = http://localhost:9001/api/v1/detect
backend = tflite  ; Detection backend: onnx, tflite, or opencv (default: onnx)

[memory]
buffer_size = 1024  ; Buffer size in KB
use_swap = true
swap_file = /var/lib/lightnvr/data/swap
swap_size = 134217728  ; 128MB in bytes

[hardware]
hw_accel_enabled = false
hw_accel_device =

[go2rtc]
; go2rtc binary and configuration paths
; binary_path = /usr/local/bin/go2rtc
; config_dir = /tmp/go2rtc
; api_port = 1984

; WebRTC configuration for NAT/firewall traversal
; Enable WebRTC streaming (default: true)
webrtc_enabled = true

; WebRTC listen port (default: 8555)
; Make sure this port is forwarded through your firewall/NAT
webrtc_listen_port = 8555

; Enable STUN servers for NAT traversal (default: true)
; STUN helps establish WebRTC connections through NAT/firewalls
stun_enabled = true

; Primary STUN server (default: stun.l.google.com:19302)
stun_server = stun.l.google.com:19302

; Optional: Specify external IP address for complex NAT scenarios
; Leave empty for auto-detection (recommended)
; external_ip =

; Optional: Custom ICE servers (comma-separated)
; Format: stun:host:port or turn:host:port
; Example: stun:stun.example.com:3478,turn:turn.example.com:3478
; ice_servers =
