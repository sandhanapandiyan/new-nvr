<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>WebRTC View - LightNVR</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
      body { background-color: #03070c; font-family: 'Inter', sans-serif; }
    </style>
    <!-- Theme initialization script - runs before page render to prevent FOUC -->
    <script>
    (function() {
      try {
        document.documentElement.classList.add('dark');
        const COLOR_THEMES = {"default":{"name":"Default","light":{"hue":240,"saturation":5.9},"dark":{"hue":240,"saturation":3.7},"icon":"ðŸŽ¨"},"blue":{"name":"Ocean Blue","light":{"hue":217,"saturation":32},"dark":{"hue":217,"saturation":25},"icon":"ðŸŒŠ"},"emerald":{"name":"Forest Green","light":{"hue":160,"saturation":30},"dark":{"hue":160,"saturation":25},"icon":"ðŸŒ²"},"purple":{"name":"Royal Purple","light":{"hue":265,"saturation":28},"dark":{"hue":265,"saturation":20},"icon":"ðŸ‘‘"},"rose":{"name":"Sunset Rose","light":{"hue":350,"saturation":25},"dark":{"hue":350,"saturation":18},"icon":"ðŸŒ¹"},"amber":{"name":"Golden Amber","light":{"hue":45,"saturation":28},"dark":{"hue":45,"saturation":20},"icon":"âš¡"},"slate":{"name":"Cool Slate","light":{"hue":215,"saturation":8},"dark":{"hue":215,"saturation":6},"icon":"ðŸ—¿"}};
        const savedTheme = localStorage.getItem('lightnvr-theme');
        const savedColorIntensity = localStorage.getItem('lightnvr-color-intensity');
        const savedColorTheme = localStorage.getItem('lightnvr-color-theme');
        const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        let finalTheme = 'light';
        if (savedTheme) { finalTheme = savedTheme; } else if (systemPrefersDark) { finalTheme = 'dark'; }
        if (finalTheme === 'dark') { document.documentElement.classList.add('dark'); } else { document.documentElement.classList.remove('dark'); }
        if (savedColorIntensity && savedColorTheme) {
          const colorTheme = savedColorTheme in COLOR_THEMES ? savedColorTheme : 'default';
          const colorIntensity = parseInt(savedColorIntensity) || 50;
          const isDark = finalTheme === 'dark';
          const selectedTheme = COLOR_THEMES[colorTheme];
          const themeColors = isDark ? selectedTheme.dark : selectedTheme.light;
          const intensity = colorIntensity / 100;
          const root = document.documentElement;
          if (isDark) {
            const bgLightness = Math.round(8 + (intensity * 12));
            const cardLightness = Math.round(10 + (intensity * 15));
            const accentLightness = Math.round(22 + (intensity * 18));
            const borderLightness = Math.round(20 + (intensity * 20));
            const primaryLightness = Math.round(45 + (intensity * 15));
            root.style.setProperty('--background', themeColors.hue + ' 10% ' + bgLightness + '%');
            root.style.setProperty('--foreground', themeColors.hue + ' 5% 90%');
            root.style.setProperty('--card', themeColors.hue + ' 10% ' + cardLightness + '%');
            root.style.setProperty('--card-foreground', themeColors.hue + ' 5% 90%');
            root.style.setProperty('--popover', themeColors.hue + ' 10% ' + cardLightness + '%');
            root.style.setProperty('--popover-foreground', themeColors.hue + ' 5% 90%');
            root.style.setProperty('--primary', themeColors.hue + ' ' + themeColors.saturation + '% ' + primaryLightness + '%');
            root.style.setProperty('--primary-foreground', '0 0% 98%');
            root.style.setProperty('--secondary', themeColors.hue + ' ' + themeColors.saturation + '% ' + Math.round(18 + (intensity * 15)) + '%');
            root.style.setProperty('--secondary-foreground', '0 0% 98%');
            root.style.setProperty('--muted', themeColors.hue + ' ' + themeColors.saturation + '% ' + Math.round(16 + (intensity * 12)) + '%');
            root.style.setProperty('--muted-foreground', themeColors.hue + ' 5% 65%');
            root.style.setProperty('--accent', themeColors.hue + ' ' + themeColors.saturation + '% ' + accentLightness + '%');
            root.style.setProperty('--accent-foreground', themeColors.hue + ' 5% 90%');
            root.style.setProperty('--border', themeColors.hue + ' ' + themeColors.saturation + '% ' + borderLightness + '%');
            root.style.setProperty('--input', themeColors.hue + ' ' + themeColors.saturation + '% ' + Math.round(18 + (intensity * 12)) + '%');
            root.style.setProperty('--success', '142 76% 45%');
            root.style.setProperty('--success-foreground', '0 0% 98%');
            root.style.setProperty('--success-muted', '142 76% 15%');
            root.style.setProperty('--success-muted-foreground', '142 76% 70%');
            root.style.setProperty('--warning', '38 92% 55%');
            root.style.setProperty('--warning-foreground', '0 0% 10%');
            root.style.setProperty('--warning-muted', '38 92% 15%');
            root.style.setProperty('--warning-muted-foreground', '38 92% 75%');
            root.style.setProperty('--danger', '0 84% 60%');
            root.style.setProperty('--danger-foreground', '0 0% 98%');
            root.style.setProperty('--danger-muted', '0 84% 15%');
            root.style.setProperty('--danger-muted-foreground', '0 84% 75%');
            root.style.setProperty('--info', '217 91% 60%');
            root.style.setProperty('--info-foreground', '0 0% 98%');
            root.style.setProperty('--info-muted', '217 91% 15%');
            root.style.setProperty('--info-muted-foreground', '217 91% 75%');
          } else {
            const bgLightness = Math.round(98 - (intensity * 5));
            const cardLightness = Math.round(100 - (intensity * 2));
            const foregroundLightness = Math.round(15 + (intensity * 10));
            const accentLightness = Math.round(88 + (intensity * 8));
            const borderLightness = Math.round(85 + (intensity * 10));
            const primaryLightness = Math.round(50 - (intensity * 15));
            root.style.setProperty('--background', themeColors.hue + ' 10% ' + bgLightness + '%');
            root.style.setProperty('--foreground', themeColors.hue + ' 10% ' + foregroundLightness + '%');
            root.style.setProperty('--card', themeColors.hue + ' 10% ' + cardLightness + '%');
            root.style.setProperty('--card-foreground', themeColors.hue + ' 10% ' + foregroundLightness + '%');
            root.style.setProperty('--popover', themeColors.hue + ' 10% ' + cardLightness + '%');
            root.style.setProperty('--popover-foreground', themeColors.hue + ' 10% ' + foregroundLightness + '%');
            root.style.setProperty('--primary', themeColors.hue + ' ' + themeColors.saturation + '% ' + primaryLightness + '%');
            root.style.setProperty('--primary-foreground', '0 0% 98%');
            root.style.setProperty('--secondary', themeColors.hue + ' ' + themeColors.saturation + '% ' + Math.round(92 + (intensity * 6)) + '%');
            root.style.setProperty('--secondary-foreground', '0 0% 15%');
            root.style.setProperty('--muted', themeColors.hue + ' ' + themeColors.saturation + '% ' + Math.round(92 + (intensity * 6)) + '%');
            root.style.setProperty('--muted-foreground', themeColors.hue + ' 10% 45%');
            root.style.setProperty('--accent', themeColors.hue + ' ' + themeColors.saturation + '% ' + accentLightness + '%');
            root.style.setProperty('--accent-foreground', themeColors.hue + ' 10% ' + foregroundLightness + '%');
            root.style.setProperty('--border', themeColors.hue + ' ' + themeColors.saturation + '% ' + borderLightness + '%');
            root.style.setProperty('--input', themeColors.hue + ' ' + themeColors.saturation + '% ' + Math.round(92 + (intensity * 6)) + '%');
            root.style.setProperty('--success', '142 76% 36%');
            root.style.setProperty('--success-foreground', '0 0% 98%');
            root.style.setProperty('--success-muted', '142 76% 95%');
            root.style.setProperty('--success-muted-foreground', '142 76% 25%');
            root.style.setProperty('--warning', '38 92% 50%');
            root.style.setProperty('--warning-foreground', '0 0% 98%');
            root.style.setProperty('--warning-muted', '38 92% 95%');
            root.style.setProperty('--warning-muted-foreground', '38 92% 30%');
            root.style.setProperty('--danger', '0 84% 60%');
            root.style.setProperty('--danger-foreground', '0 0% 98%');
            root.style.setProperty('--danger-muted', '0 84% 95%');
            root.style.setProperty('--danger-muted-foreground', '0 84% 40%');
            root.style.setProperty('--info', '217 91% 60%');
            root.style.setProperty('--info-foreground', '0 0% 98%');
            root.style.setProperty('--info-muted', '217 91% 95%');
            root.style.setProperty('--info-muted-foreground', '217 91% 35%');
          }
        }
        window.__LIGHTNVR_THEME_APPLIED__ = true;
      } catch (e) {
        console.warn('Theme script failed:', e);
        if (window.matchMedia('(prefers-color-scheme: dark)').matches) { document.documentElement.classList.add('dark'); }
      }
    })();
    </script>

    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="stylesheet" href="./css/layout.css">
    <link rel="stylesheet" href="./css/live.css">
    <link rel="icon" href="./img/favicon.ico" type="image/x-icon">
</head>
<body class="flex flex-col min-h-screen bg-background text-foreground w-full">
<div class="container mx-auto px-4 flex flex-col min-h-screen w-full">
    <header id="header-container" data-active-nav="nav-live">
        <!-- Header content will be loaded by JavaScript -->
    </header>

    <main id="main-content" class="flex-grow">
    </main>

    <footer id="footer-container" class="mt-auto">
        <!-- Footer content will be loaded by JavaScript -->
    </footer>
</div>

<!-- UI components will be rendered here -->
<div id="status-message-container"></div>
<div id="snapshot-modal-container"></div>
<div id="video-modal-container"></div>

<!-- Scripts -->
<script type="module" src="js/pages/index-page.jsx"></script>
</body>
</html>
